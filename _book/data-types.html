<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Understanding Web Data in R, and Building Clients</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="This book will teach you how to leverage, and build clients for, data on the web">
  <meta name="generator" content="bookdown 0.0.73 and GitBook 2.6.7">

  <meta property="og:title" content="Understanding Web Data in R, and Building Clients" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com/sckott/wdclients" />
  
  <meta property="og:description" content="This book will teach you how to leverage, and build clients for, data on the web" />
  <meta name="github-repo" content="sckott/wdclients" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Understanding Web Data in R, and Building Clients" />
  <meta name="twitter:site" content="@sckottie" />
  <meta name="twitter:description" content="This book will teach you how to leverage, and build clients for, data on the web" />
  

<meta name="author" content="Scott Chamberlain">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="introduction.html">
<link rel="next" href="apis.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>

<link rel="stylesheet" href="wdclients.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Web Data in R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-you-will-learn"><i class="fa fa-check"></i><b>1.1</b> What you will learn</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a><ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#r-packages"><i class="fa fa-check"></i><b>1.2.1</b> R packages</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#acknowledgements"><i class="fa fa-check"></i><b>1.3</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#colophon"><i class="fa fa-check"></i><b>1.4</b> Colophon</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>2</b> Data Types</a><ul>
<li class="chapter" data-level="2.1" data-path="data-types.html"><a href="data-types.html#json"><i class="fa fa-check"></i><b>2.1</b> JSON</a></li>
<li class="chapter" data-level="2.2" data-path="data-types.html"><a href="data-types.html#xml"><i class="fa fa-check"></i><b>2.2</b> XML</a></li>
<li class="chapter" data-level="2.3" data-path="data-types.html"><a href="data-types.html#html"><i class="fa fa-check"></i><b>2.3</b> HTML</a></li>
<li class="chapter" data-level="2.4" data-path="data-types.html"><a href="data-types.html#files"><i class="fa fa-check"></i><b>2.4</b> Files</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="apis.html"><a href="apis.html"><i class="fa fa-check"></i><b>3</b> APIs</a><ul>
<li class="chapter" data-level="3.1" data-path="apis.html"><a href="apis.html#breakdown-of-the-types"><i class="fa fa-check"></i><b>3.1</b> Breakdown of the types</a></li>
<li class="chapter" data-level="3.2" data-path="apis.html"><a href="apis.html#rpc"><i class="fa fa-check"></i><b>3.2</b> RPC</a></li>
<li class="chapter" data-level="3.3" data-path="apis.html"><a href="apis.html#soap"><i class="fa fa-check"></i><b>3.3</b> SOAP</a></li>
<li class="chapter" data-level="3.4" data-path="apis.html"><a href="apis.html#rest"><i class="fa fa-check"></i><b>3.4</b> REST</a></li>
<li class="chapter" data-level="3.5" data-path="apis.html"><a href="apis.html#others"><i class="fa fa-check"></i><b>3.5</b> Others</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="working-with-apis.html"><a href="working-with-apis.html"><i class="fa fa-check"></i><b>4</b> Working with APIs</a><ul>
<li class="chapter" data-level="4.1" data-path="working-with-apis.html"><a href="working-with-apis.html#xxx"><i class="fa fa-check"></i><b>4.1</b> xxx</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="api-clients.html"><a href="api-clients.html"><i class="fa fa-check"></i><b>5</b> API clients</a><ul>
<li class="chapter" data-level="5.1" data-path="api-clients.html"><a href="api-clients.html#writing-r-packages"><i class="fa fa-check"></i><b>5.1</b> Writing R packages</a></li>
<li class="chapter" data-level="5.2" data-path="api-clients.html"><a href="api-clients.html#core-http-helpers"><i class="fa fa-check"></i><b>5.2</b> Core HTTP helpers</a></li>
<li class="chapter" data-level="5.3" data-path="api-clients.html"><a href="api-clients.html#what-to-return-to-users"><i class="fa fa-check"></i><b>5.3</b> What to return to users</a></li>
<li class="chapter" data-level="5.4" data-path="api-clients.html"><a href="api-clients.html#abstracted-vs.1-to-1-user-interfaces"><i class="fa fa-check"></i><b>5.4</b> Abstracted vs. 1-to-1 user interfaces</a></li>
<li class="chapter" data-level="5.5" data-path="api-clients.html"><a href="api-clients.html#http-request-inspection"><i class="fa fa-check"></i><b>5.5</b> HTTP request inspection</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="curl.html"><a href="curl.html"><i class="fa fa-check"></i><b>6</b> curl</a><ul>
<li class="chapter" data-level="6.1" data-path="curl.html"><a href="curl.html#discover-curl-options"><i class="fa fa-check"></i><b>6.1</b> Discover curl options</a></li>
<li class="chapter" data-level="6.2" data-path="curl.html"><a href="curl.html#other-ways-to-use-curl-besides-r"><i class="fa fa-check"></i><b>6.2</b> Other ways to use curl besides R</a></li>
<li class="chapter" data-level="6.3" data-path="curl.html"><a href="curl.html#install-httr"><i class="fa fa-check"></i><b>6.3</b> Install httr</a></li>
<li class="chapter" data-level="6.4" data-path="curl.html"><a href="curl.html#general-option-setting"><i class="fa fa-check"></i><b>6.4</b> general option setting</a></li>
<li class="chapter" data-level="6.5" data-path="curl.html"><a href="curl.html#curl-options-in-ropensci-packages"><i class="fa fa-check"></i><b>6.5</b> curl options in rOpenSci packages</a></li>
<li class="chapter" data-level="6.6" data-path="curl.html"><a href="curl.html#timeout"><i class="fa fa-check"></i><b>6.6</b> timeout</a></li>
<li class="chapter" data-level="6.7" data-path="curl.html"><a href="curl.html#verbose"><i class="fa fa-check"></i><b>6.7</b> verbose</a></li>
<li class="chapter" data-level="6.8" data-path="curl.html"><a href="curl.html#headers"><i class="fa fa-check"></i><b>6.8</b> headers</a></li>
<li class="chapter" data-level="6.9" data-path="curl.html"><a href="curl.html#authenticate"><i class="fa fa-check"></i><b>6.9</b> authenticate</a></li>
<li class="chapter" data-level="6.10" data-path="curl.html"><a href="curl.html#cookies"><i class="fa fa-check"></i><b>6.10</b> cookies</a></li>
<li class="chapter" data-level="6.11" data-path="curl.html"><a href="curl.html#progress"><i class="fa fa-check"></i><b>6.11</b> progress</a></li>
<li class="chapter" data-level="6.12" data-path="curl.html"><a href="curl.html#proxies"><i class="fa fa-check"></i><b>6.12</b> proxies</a></li>
<li class="chapter" data-level="6.13" data-path="curl.html"><a href="curl.html#user-agent"><i class="fa fa-check"></i><b>6.13</b> user agent</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ftp.html"><a href="ftp.html"><i class="fa fa-check"></i><b>7</b> FTP</a></li>
<li class="chapter" data-level="8" data-path="http.html"><a href="http.html"><i class="fa fa-check"></i><b>8</b> HTTP</a><ul>
<li class="chapter" data-level="8.1" data-path="http.html"><a href="http.html#http2"><i class="fa fa-check"></i><b>8.1</b> HTTP/2</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="authentication.html"><a href="authentication.html"><i class="fa fa-check"></i><b>9</b> Authentication</a><ul>
<li class="chapter" data-level="9.1" data-path="authentication.html"><a href="authentication.html#simple-authentication"><i class="fa fa-check"></i><b>9.1</b> Simple authentication</a></li>
<li class="chapter" data-level="9.2" data-path="authentication.html"><a href="authentication.html#oauth"><i class="fa fa-check"></i><b>9.2</b> OAuth</a><ul>
<li class="chapter" data-level="9.2.1" data-path="authentication.html"><a href="authentication.html#oauth1"><i class="fa fa-check"></i><b>9.2.1</b> OAuth1</a></li>
<li class="chapter" data-level="9.2.2" data-path="authentication.html"><a href="authentication.html#oauth2"><i class="fa fa-check"></i><b>9.2.2</b> OAuth2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="caching.html"><a href="caching.html"><i class="fa fa-check"></i><b>10</b> Caching</a><ul>
<li class="chapter" data-level="10.1" data-path="caching.html"><a href="caching.html#why-cache"><i class="fa fa-check"></i><b>10.1</b> Why cache?</a></li>
<li class="chapter" data-level="10.2" data-path="caching.html"><a href="caching.html#http-based-caching"><i class="fa fa-check"></i><b>10.2</b> http based caching</a></li>
<li class="chapter" data-level="10.3" data-path="caching.html"><a href="caching.html#r-based-caching"><i class="fa fa-check"></i><b>10.3</b> R based caching</a><ul>
<li class="chapter" data-level="10.3.1" data-path="caching.html"><a href="caching.html#vcr"><i class="fa fa-check"></i><b>10.3.1</b> vcr</a></li>
<li class="chapter" data-level="10.3.2" data-path="caching.html"><a href="caching.html#rappdirs"><i class="fa fa-check"></i><b>10.3.2</b> rappdirs</a></li>
<li class="chapter" data-level="10.3.3" data-path="caching.html"><a href="caching.html#other-packages"><i class="fa fa-check"></i><b>10.3.3</b> other packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="packaging.html"><a href="packaging.html"><i class="fa fa-check"></i><b>11</b> Packaging</a><ul>
<li class="chapter" data-level="11.1" data-path="packaging.html"><a href="packaging.html#http-functions"><i class="fa fa-check"></i><b>11.1</b> HTTP functions</a></li>
<li class="chapter" data-level="11.2" data-path="packaging.html"><a href="packaging.html#curl-options"><i class="fa fa-check"></i><b>11.2</b> Curl options</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="defensive-programming.html"><a href="defensive-programming.html"><i class="fa fa-check"></i><b>12</b> Defensive Programming</a><ul>
<li class="chapter" data-level="12.1" data-path="defensive-programming.html"><a href="defensive-programming.html#fail-fast"><i class="fa fa-check"></i><b>12.1</b> Fail fast</a></li>
<li class="chapter" data-level="12.2" data-path="defensive-programming.html"><a href="defensive-programming.html#what-to-defend-against"><i class="fa fa-check"></i><b>12.2</b> What to defend against</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="testing.html"><a href="testing.html"><i class="fa fa-check"></i><b>13</b> Testing</a><ul>
<li class="chapter" data-level="13.1" data-path="testing.html"><a href="testing.html#testthat"><i class="fa fa-check"></i><b>13.1</b> testthat</a><ul>
<li class="chapter" data-level="13.1.1" data-path="testing.html"><a href="testing.html#skipping-tests"><i class="fa fa-check"></i><b>13.1.1</b> Skipping tests</a></li>
<li class="chapter" data-level="13.1.2" data-path="testing.html"><a href="testing.html#test-if-web-resource-is-up"><i class="fa fa-check"></i><b>13.1.2</b> Test if web resource is up</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="testing.html"><a href="testing.html#mocking-web-requests"><i class="fa fa-check"></i><b>13.2</b> Mocking web requests</a><ul>
<li class="chapter" data-level="13.2.1" data-path="testing.html"><a href="testing.html#vcr-1"><i class="fa fa-check"></i><b>13.2.1</b> vcr</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="testing.html"><a href="testing.html#webmockr"><i class="fa fa-check"></i><b>13.3</b> webmockr</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="package-automation.html"><a href="package-automation.html"><i class="fa fa-check"></i><b>14</b> Package Automation</a><ul>
<li class="chapter" data-level="14.1" data-path="package-automation.html"><a href="package-automation.html#api-specifications"><i class="fa fa-check"></i><b>14.1</b> API Specifications</a></li>
<li class="chapter" data-level="14.2" data-path="package-automation.html"><a href="package-automation.html#package-generator"><i class="fa fa-check"></i><b>14.2</b> Package generator</a></li>
<li class="chapter" data-level="14.3" data-path="package-automation.html"><a href="package-automation.html#keeping-up-to-date"><i class="fa fa-check"></i><b>14.3</b> Keeping up to date</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="easy-http-requests.html"><a href="easy-http-requests.html"><i class="fa fa-check"></i><b>15</b> Easy HTTP Requests</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Understanding Web Data in R, and Building Clients</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-types" class="section level1">
<h1><span class="header-section-number">2</span> Data Types</h1>
<p>There are a lot of different types of data from the web that you may work with - I’ll go over the major ones as it’s important to be familiar with the data you’ll be working with in this book.</p>
<div id="json" class="section level2">
<h2><span class="header-section-number">2.1</span> JSON</h2>
<p>JSON (Javascript Object Notation) is becoming the most common data format on the web. Compared to XML (described below), it is simpler, and easier for humans to read. However, JSON does lose some specificity and metadata that XML is so good at. There is a variant of JSON called JSON-LD, for JSON Linked Data, that allows context to be included with a JSON document, e.g., linking to schema.</p>
<p>The most basic valid JSON document is <code>{}</code>, but of course it carries little value. A basic JSON blob with information looks like:</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
    <span class="dt">&quot;hello&quot;</span><span class="fu">:</span> <span class="st">&quot;world&quot;</span>
<span class="fu">}</span></code></pre>
<p>Another example:</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
    <span class="dt">&quot;foo&quot;</span><span class="fu">:</span> <span class="fu">{</span>
        <span class="dt">&quot;bar&quot;</span><span class="fu">:</span> <span class="st">&quot;Hello World!&quot;</span>
    <span class="fu">}</span>
<span class="fu">}</span></code></pre>
<p>JSON <a href="http://www.json.org/"><a href="http://www.json.org/" class="uri">http://www.json.org/</a></a> is built on two structures:</p>
<ul>
<li>A collection of name-value pairs, where the name is a string and the value can be a variety of objects.</li>
<li>An ordered list of values. In most languages, this is realized as an array, vector, list, or sequence.</li>
</ul>
<p>JSON data structures:</p>
<ul>
<li><code>object</code>: An unordered set of name/value pairs. Begins with <code>{</code>, and ends with <code>}</code>. Each name is followed by <code>:</code>, and the name/value pairs are separated by <code>,</code>.</li>
<li><code>array</code>: An ordered collection of values. Begins with <code>[</code>, and ends with <code>]</code>. Values are separated by <code>,</code>.</li>
<li><code>value</code>: A string in double quotes, a number, true or false, null, an object, or an array. Can be nested.</li>
<li><code>string</code>: A sequence of zero or more Unicode characters, wrapped in double quotes, using backslash escapes.</li>
<li><code>number</code>: A number.</li>
</ul>
<p>There are likely parsers in all programming languages, making it super easy to work with.</p>
<p>Most web APIs provide JSON as the default data format, or at least provide it as an option.</p>
<p>In R, the best way to work with JSON is with the <code>jsonlite</code> package, made by <a href="https://github.com/jeroenooms/">Jeroen Ooms</a>. It is a modern JSON processor, and importantly converts JSON data structures described above to equivalent R data structures whenever possible. This makes it super easy to work with JSON data in R, parsing the JSON but also giving back data.frames, which are easier to work with for most people. Other JSON clients in R include <code>rjson</code> and <code>RJSONIO</code>.</p>
</div>
<div id="xml" class="section level2">
<h2><span class="header-section-number">2.2</span> XML</h2>
<p>XML (Extensible Markup Language) is a markup language - not just a data interchange format as is JSON. You can find the specification at <a href="https://www.w3.org/TR/xml/"><a href="https://www.w3.org/TR/xml/" class="uri">https://www.w3.org/TR/xml/</a></a>.</p>
<p>Here’s an example:</p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;foo&gt;</span>
    <span class="kw">&lt;bar&gt;</span>Hello World!<span class="kw">&lt;/bar&gt;</span>
<span class="kw">&lt;/foo&gt;</span></code></pre>
<p>You can see how XML differs from JSON, but also the similarities. XML uses named elements, which JSON also uses (it’s keys). XML simply takes up more text (bytes) to transfer the same amount of content, which makes JSON more appealing in cases where efficiency matters (e.g. in browser, and mobile platforms).</p>
</div>
<div id="html" class="section level2">
<h2><span class="header-section-number">2.3</span> HTML</h2>
<p>HTML (Hyptertext Markup Lanugage) is the language of the web (together with CSS for styling and Javascript for adding behavior).</p>
<p>Working with HTML as a data type is a last resort option. Sometimes you need data from a website, but all they have the HTML that defines the page. This is a last resort because it can be difficult/frustrating to extract what you want from HTML. In addition, HTML that defines a page can be changed at any moment, breaking your code to work with it - whereas an API or a file you download likely will not change, or change less often, or change in non-breaking ways.</p>
<p>The best tools in R for working with HTML include <code>xml2</code> and <code>rvest</code>.</p>
</div>
<div id="files" class="section level2">
<h2><span class="header-section-number">2.4</span> Files</h2>
<p>I won’t go into detail on files as there are hundreds, if not more, different file formats. Good R tools for working with files are <code>readr</code>, <code>data.table::fread</code>, <code>rio</code>, etc.</p>
<p>When files are large it’s a good idea to cache them on the user’s machine so that subsequent requests for the same files only take the time to read in the file, not the downloading time. Best practice for this is the package <a href="https://github.com/hadley/rappdirs">rappdirs</a>, which makes it easy to determine locations across operating systems for different types of file storage: caching vs. data vs. configuration vs. logging.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="apis.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/sckott/wdclients/edit/master/data-types.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
